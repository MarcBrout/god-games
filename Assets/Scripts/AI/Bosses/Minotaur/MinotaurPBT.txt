tree "Root"
	fallback
		IsDead
		sequence
			tree("__AcquireNewTargetIfNeeded__")
			tree("__LightningPhase__")
			fallback
				tree("__BerserkMode__")
				tree("__MoveTowardTarget__")
				tree("__AttackTarget__")
				tree("__idle__")

tree "__AcquireNewTargetIfNeeded__"
	fallback
		sequence
			fallback
				not HasCurrentTarget
				HasToSwitchTarget
			AcquireNewTarget
		Success

tree "__LightningPhase__"
	fallback
		sequence
			IsLightningModeActivated
			CanInvokeLightningStrike
			InvokeLightningStrike
		Success

tree "__BerserkMode__"
	sequence 
		IsBerserk
		repeat 3
			sequence
				fallback
					IsPreparingShockWave
					PrepareShockWave
				fallback
					while IsPreparingShockWave
						repeat
							sequence
								HasCurrentTarget
								AimAtTarget
					WaitDelayBetweenPreparePhaseAndShockWave
					ShockWave
					WaitShockWaveDuration
					Success
				Wait 1.0
				Success
		DeactivateBerserkMode

tree "__MoveTowardTarget__"
	sequence
		IsTooFarFromTarget
		MoveTowardTarget

tree "__AttackTarget__"
	sequence
		CanAttackTarget
		AttackTarget

tree "__idle__"
	Idle